{"version":3,"sources":["webpack:///./js-shared/lib/DataStores/LSCacheStore.js","webpack:///./js-shared/lib/Utils/GraphUtilities.js","webpack:///./js-shared/lib/axios-instance-config.js"],"names":["EventEmitter","require","emitter","querystring","axios","lsCacheHostsURL","lsQueryURL","proxyURL","module","exports","LSCachesRetrievedTag","useProxy","lsCacheURL","data","retrieveLSList","get","then","response","console","log","handleLSListResponse","bind","lsURLs","Array","isArray","length","url","emit","subscribeLSCaches","callback","on","unsubscribeLSCaches","removeListener","subscribeTag","tag","unsubscribeTag","off","queryLSCache","query","message","preparedQuery","JSON","stringify","self","successCallback","handleLSCacheDataResponse","catch","error","status","headers","request","getProxyURL","postData","preparedData","method","config","jqXHR","textStatus","errorThrown","handleInterfaceInfoError","getResponseData","proxy","parseUrl","encodeURIComponent","urlObj","origin","pathname","search","a","document","createElement","href","port","host","ret","hostname","protocol","hash","retrieveInterfaceInfo","source_input","dest_input","sources","dests","getInterfaceInfo","interfaceObj","handleInterfaceInfoResponse","_parseInterfaceResults","interfaceInfo","out","i","hits","row","_source","addresses","j","address","subscribe","unsubscribe","array2param","name","array","joiner","join","getInterfaceDetails","details","addrs","split","k","getTimezone","date","tz","tzRe","offset","exec","dateObj","Date","dateMoment","utcOffset","getTimeVars","period","timeDiff","summaryWindow","timeRange","timeframe","unique","arr","len","obj","Object","keys","formatBool","input","unknownText","formatUnknown","formatSItoSI","value","Y","re","results","match","values","K","M","G","toUpperCase","X","Math","round","str","http","https","create","timeout","httpAgent","Agent","keepAlive","httpsAgent","maxRedirects","maxContentLength"],"mappings":"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","file":"ps-shared.js","sourcesContent":["import GraphUtilities from \"../Utils/GraphUtilities\";\n\nlet EventEmitter = require(\"events\").EventEmitter;\nlet emitter = new EventEmitter();\nlet querystring = require('querystring');\n\nlet axios = require(\"../axios-instance-config.js\");\n\nconst lsCacheHostsURL = \"cgi-bin/graphData.cgi?action=ls_cache_hosts\";\nconst lsQueryURL = \"cgi-bin/graphData.cgi?action=interfaces\";\nconst proxyURL = \"/perfsonar-graphs/cgi-bin/graphData.cgi?action=ls_cache_data&url=\";\n\n/*\n * DESCRIPTION OF CLASS HERE\n*/\n\nmodule.exports = {\n    LSCachesRetrievedTag: \"lsCaches\",\n    useProxy: false,\n    lsCacheURL: null,\n    data: null,\n\n    retrieveLSList: function() {\n        axios.get( lsCacheHostsURL )\n             .then(function(response){\n                let data = response.data;\n                console.log(\"lscachehosts\", data);\n                this.handleLSListResponse( data );\n        }.bind(this));\n    },\n\n    handleLSListResponse: function( data ) {\n        this.lsURLs = data;\n        console.log(\"lsURLs\", data);\n        if ( typeof data == \"undefined\" || ! Array.isArray( data ) ) {\n            console.log(\"LS cache host data is invalid/missingZ\");\n        } else if ( data.length > 0  ) {\n            console.log(\"array of LS cache host data\");\n            this.lsCacheURL = data[0].url;\n            if ( this.lsCacheURL === null ) {\n                console.log(\"no url found!\");\n\n            }\n            console.log(\"selecting cache url: \", this.lsCacheURL);\n            emitter.emit( this.LSCachesRetrievedTag );\n        } else {\n            console.log(\"no LS cache host data available\");\n        } \n        //LSCacheStore.subscribe( \n        //this.retrieveLSHosts();\n\n    },\n\n    subscribeLSCaches: function( callback ) {\n        emitter.on( this.LSCachesRetrievedTag, callback );\n\n    },\n\n    unsubscribeLSCaches: function( callback ) {\n        emitter.removeListener( this.LSCachesRetrievedTag, callback );\n\n    },\n\n    subscribeTag: function( callback, tag ) {\n        emitter.on( tag, callback );\n\n    },\n\n    unsubscribeTag: function( callback, tag ) {\n        emitter.off( tag, callback );\n\n    },\n\n    // TODO: convert this function to a generic one that can take a query as a parameter\n    // and a callback\n    queryLSCache: function( query, message ) {\n        let lsCacheURL = this.lsCacheURL + \"_search\";\n\n        //this.retrieveHostLSData( hosts, lsCacheURL );\n\n        console.log(\"query\", query);\n\n        let preparedQuery = JSON.stringify( query );\n\n        console.log(\"stringified query\", preparedQuery);\n\n        console.log(\"lsCacheURL\", lsCacheURL);\n        console.log(\"message\", message);\n\n        this.message = message;\n\n        let self = this;\n        let successCallback = function( data ) {\n            self.handleLSCacheDataResponse( data, message );\n\n        };\n\n        axios({\n            \"url\": lsCacheURL,\n            \"data\": preparedQuery,\n            \"dataType\": 'json',\n            \"method\": \"POST\"\n        })\n        .then(function( response ) {\n            let data = response.data;\n            console.log(\"data from posted request FIRST DONE SECTION\", data);\n            //this.handleInterfaceInfoResponse( data );\n            //this.handleLSCacheDataResponse( data, message );\n            successCallback( data );\n\n        }.bind(this))\n        .catch(function(error) {\n            console.log(\"error\", error);\n\n            if (error.response) {\n                // The request was made and the server responded with a status code\n                // that falls out of the range of 2xx\n                console.log(\"response error\", error.response.data);\n                console.log(error.response.status);\n                console.log(error.response.headers);\n            } else if (error.request) {\n                // The request was made but no response was received\n                // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n                // http.ClientRequest in node.js\n                console.log(\"request error\", error.request);\n                    // if we get an error, try the cgi instead\n                    // and set a new flag, useProxy  and make\n                    // all requests through the proxy CGI\n                    let request = error.request;\n                    if ( request.status == 0 ) {\n                        console.log(\"got here!\");\n                        this.useProxy = true;\n                        let url = this.getProxyURL( lsCacheURL );\n                        console.log(\"proxy URL\", url);\n\n                        preparedQuery = JSON.stringify( query );\n\n                        let postData = {\n                            \"query\": preparedQuery,\n                            \"action\": \"ls_cache_data\",\n                            \"dataType\": 'json',\n                            \"url\": lsCacheURL\n\n                        };\n\n                        let preparedData = JSON.stringify( postData );\n\n                        axios({\n                            url: url,\n                            data: querystring.stringify(postData),\n//dataType: 'json',\n                            method: \"POST\"\n                        })\n                        .then(function(response) {\n                                let data = response.data;\n                                console.log(\"query data! SECOND DONE SECTIONz\", data);\n                                //this.handleInterfaceInfoResponse(data);\n                                //this.handleLSCacheDataResponse( data, message );\n                                successCallback( data );\n                            }.bind(this))\n                            .catch (function( data ) {\n                                  //this.handleInterfaceInfoError(data);\n                            }.bind(this));\n            } else {\n                // Something happened in setting up the request that triggered an Error\n                console.log('Error', error.message);\n            }\n            console.log(error.config);\n\n\n\n                        } else {\n                            console.log('fail jqXHR, textStatus, errorThrown', jqXHR, textStatus, errorThrown);\n                            this.handleInterfaceInfoError( data );\n\n                        }\n\n        }.bind(this));\n\n\n\n    },\n    handleLSCacheDataResponse: function( data, message ) {\n        console.log(\"handling LS cache data response (data, message)\", data, message);\n        this.data = data;\n        emitter.emit( this.message );\n    },\n\n    getResponseData: function() {\n        console.log(\"getting response data ...\");\n        return this.data;\n    },\n\n    getProxyURL( url ) {\n\n        let proxy = this.parseUrl( proxyURL );\n\n        if ( this.useProxy ) {\n            url = encodeURIComponent( url );\n            url = proxyURL + url;\n        }\n        let urlObj = this.parseUrl( url );\n        url = urlObj.origin + urlObj.pathname + urlObj.search;\n        return url;\n\n    },\n\n    parseUrl: (function () {\n        return function (url) {\n            var a = document.createElement('a');\n            a.href = url;\n\n            // Work around a couple issues:\n            // - don't show the port if it's 80 or 443 (Chrome didn''t do this, but IE did)\n            // - don't append a port if the port is an empty string \"\"\n            let port = \"\";\n            if ( typeof a.port != \"undefined\" ) {\n                if ( a.port != \"80\" && a.port != \"443\" && a.port != \"\" ) {\n                    port = \":\" + a.port;\n                }\n            }\n\n            let host = a.host;\n            let ret = {\n                host: a.host,\n                hostname: a.hostname,\n                pathname: a.pathname,\n                port: a.port,\n                protocol: a.protocol,\n                search: a.search,\n                hash: a.hash,\n                origin: a.protocol + \"//\" + a.hostname + port\n            };\n            return ret;\n        }\n    })(),\n\n    retrieveInterfaceInfo: function( source_input, dest_input ) {\n\n\n        let sources;\n        let dests;\n        if ( Array.isArray( source_input ) ) {\n            sources = source_input;\n        } else {\n            sources = [ source_input ];\n        }\n        if ( Array.isArray( dest_input ) ) {\n            dests = dest_input\n        } else {\n            dests = [ dest_input ];\n        }\n        this.sources = sources;\n        this.dests = dests;\n\n        //this.retrieveLSList();\n\n    },\n    getInterfaceInfo: function( ) {\n        return this.interfaceObj;\n    },\n    handleInterfaceInfoResponse: function( data ) {\n        console.log(\"data\", data);\n        data = this._parseInterfaceResults( data );\n        console.log(\"processed data\", data);\n        //this.addData( data );\n        this.interfaceInfo = data;\n    },\n\n    _parseInterfaceResults: function( data ) {\n        let out = {};\n        for(let i in data.hits.hits ) {\n            let row = data.hits.hits[i]._source;\n            let addresses = row[\"interface-addresses\"];\n            for(let j in addresses) {\n                let address = addresses[j];\n                if ( !( address in out ) ) {\n                    out[ address ] = row;\n                    console.log(\"client uuid: \", row[\"client-uuid\"] );\n\n                }\n\n            }\n\n\n\n        }\n        console.log(\"keyed on address\", out);\n        return out;\n    },\n\n    subscribe: function( callback ) {\n        emitter.on(\"get\", callback);\n    },\n    unsubscribe: function( callback ) {\n        emitter.off(\"get\", callback);\n    },\n\n    array2param: function( name, array ) {\n        var joiner = \"&\" + name + \"=\";\n        return joiner + array.join(joiner);\n    },\n\n    // Retrieves interface details for a specific ip and returns them\n    // Currently keys on ip; could extend to search all addresses later if needed\n    getInterfaceDetails: function( host ) {\n        let details = this.interfaceObj || {};\n        if ( host in details ) {\n            return details[host];\n        } else {\n            for(let i in details ) {\n                let row = details[i];\n\n                for( let j in row.addresses ) {\n                    let address = row.addresses[j];\n                    if ( address == host ) {\n                        return details[i];\n                    } else {\n                        let addrs = host.split(\",\");\n                        if ( addrs.length > 1 ) {\n                            // handle case where addresses have comma(s)\n                            for(var k in addrs) {\n                                if ( addrs[k] == address ) {\n                                    return details[i];\n                                }\n                            }\n\n\n                        }\n                    }\n\n                }\n\n\n            }\n\n        }\n        // host not found in the cache, return empty object\n        return {};\n    }\n};\n\nmodule.exports.retrieveLSList();\n\n\n\n// WEBPACK FOOTER //\n// ./js-shared/lib/DataStores/LSCacheStore.js","import moment from \"moment-timezone\";\n\nimport { TimeSeries, TimeRange, Event } from \"pondjs\";\n\n\nmodule.exports = {\n    getTimezone: function( date ) {\n        let tz;\n        let tzRe = /\\(([^)]+)\\)/;\n        let out;\n        let offset;\n\n        if ( ( typeof date == \"undefined\" ) || date == null ) {\n            return;\n        } else if ( date == \"Invalid Date\" ) {\n            tz = \"\";\n            out = \"\";\n        } else {\n            tz = tzRe.exec( date );\n            if ( typeof tz == \"undefined\" || tz === null ) {\n                // timezone is unknown\n                return \"\";\n            } else {\n                tz = tz[1];\n                let dateObj = new Date( date );\n                let dateMoment = moment( dateObj );\n                offset = dateMoment.utcOffset() / 60;\n                if ( typeof ( offset ) != \"undefined\" && offset >= 0 ) {\n                    offset = \"+\" + offset;\n                }\n            }\n        }\n\n        out = \" (GMT\" + offset + \")\";\n        return out;\n\n    },\n\n    getTimeVars: function (period) {\n        let timeDiff;\n        let summaryWindow;\n        if (period == '4h') {\n            timeDiff = 60*60 * 4;\n            summaryWindow = 0;\n        } else if (period == '12h') {\n            timeDiff = 60*60 * 12;\n            summaryWindow = 0;\n        } else if (period == '1d') {\n            timeDiff = 86400;\n            summaryWindow = 300;\n        } else if (period == '3d') {\n            timeDiff = 86400 * 3;\n            summaryWindow = 300;\n        } else if (period == '1w') {\n            timeDiff = 86400*7;\n            summaryWindow = 3600;\n        } else if (period == '1m') {\n            timeDiff = 86400*31;\n            summaryWindow = 3600;\n        } else if (period == '1y') {\n            timeDiff = 86400*365;\n            summaryWindow = 86400;\n        }\n        let timeRange = {\n            timeDiff: timeDiff,\n            summaryWindow: summaryWindow,\n            timeframe: period\n        };\n        return timeRange;\n\n    },\n\n    // Returns the UNIQUE values of an array\n    unique: function (arr) {\n        var i,\n            len = arr.length,\n            out = [],\n            obj = { };\n\n        for (i = 0; i < len; i++) {\n            obj[arr[i]] = 0;\n        }\n        out = Object.keys( obj );\n        return out;\n    },\n\n    formatBool: function( input, unknownText ) {\n        let out;\n        if ( input === true || input === 1 || input == \"1\" ) {\n            out = \"Yes\";\n        } else if ( input === false || input === 0 || input == \"0\" ) {\n            out = \"No\";\n        }\n        out = this.formatUnknown( out, unknownText );\n        return out;\n\n    },\n\n    formatSItoSI: function( value, Y ) {\n        console.log(\"value\", value);\n        let out = value;\n        let re = /^(\\d+\\.?\\d*)\\s?([KMGT])(\\w*)/;\n        let results = value.match( re );\n        if ( results !== null ) {\n            let values = {};\n            values.K = 1024;\n            values.M = 1024 * 1024;\n            values.G = 1024 * 1024 * 1024;\n            console.log(\"values\", values);\n            console.log(\"value, re, results\", value, re, results);\n\n            out = results[1];\n\n            if ( results[2].toUpperCase() in values ) {\n                let X = results[2]\n                out = out * values[ results[2] ];\n                // convert to Y\n                out = out / values[Y];\n                out = Math.round( out * 10) / 10;\n                out += \" \" + Y + results[3];\n            };\n        }\n        console.log(\"outvalue\", out);\n\n\n        return out;\n\n    },\n\n    formatUnknown: function( str, unknownText ) {\n        if ( typeof unknownText == \"undefined\" || unknownText === null ) {\n            unknownText = \"unknown\";\n        }\n        if ( typeof str == \"undefined\" || str === null || str == \"\" ) {\n            return unknownText;\n        } else {\n            return str;\n\n        }\n\n\n    }\n\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./js-shared/lib/Utils/GraphUtilities.js","const axios = require('axios');\nconst http = require('http');\nconst https = require('https');\n\nmodule.exports = axios.create({\n  //60 sec timeout\n  timeout: 60000,\n\n  //keepAlive pools and reuses TCP connections, so it's faster\n  httpAgent: new http.Agent({ keepAlive: true }),\n  httpsAgent: new https.Agent({ keepAlive: true }),\n  \n  //follow up to 10 HTTP 3xx redirects\n  maxRedirects: 10,\n  \n  //cap the maximum content length we'll accept to 50MBs, just in case\n  maxContentLength: 50 * 1000 * 1000\n});\n\n//optionally add interceptors here...\n\n\n\n\n// WEBPACK FOOTER //\n// ./js-shared/lib/axios-instance-config.js"],"sourceRoot":""}