{"version":3,"sources":["webpack:///./src/shared/GraphUtilities.js","webpack:///./src/shared/LSCacheStore.js","webpack:///./src/shared/axios-instance-config.js","webpack:///./src/shared/HostInfoStore.js","webpack:///./src/shared/InterfaceInfoStore.js"],"names":["module","exports","getTimezone","date","tz","tzRe","out","offset","exec","dateObj","Date","dateMoment","utcOffset","getTimeVars","period","timeDiff","summaryWindow","timeRange","timeframe","unique","arr","i","len","length","obj","Object","keys","formatBool","input","unknownText","formatUnknown","formatSItoSI","value","Y","console","log","re","results","match","values","K","M","G","toUpperCase","X","Math","round","str","EventEmitter","require","emitter","querystring","axios","lsCacheHostsURL","lsQueryURL","proxyURL","LSCachesRetrievedTag","useProxy","lsCacheURL","data","retrieveLSList","get","then","response","handleLSListResponse","bind","lsURLs","Array","isArray","url","emit","subscribeLSCaches","callback","on","unsubscribeLSCaches","removeListener","subscribeTag","tag","unsubscribeTag","off","queryLSCache","query","message","preparedQuery","JSON","stringify","self","successCallback","handleLSCacheDataResponse","catch","error","status","headers","request","getProxyURL","postData","preparedData","method","config","jqXHR","textStatus","errorThrown","handleInterfaceInfoError","getResponseData","proxy","parseUrl","encodeURIComponent","urlObj","origin","pathname","search","a","document","createElement","href","port","host","ret","hostname","protocol","hash","retrieveInterfaceInfo","source_input","dest_input","sources","dests","getInterfaceInfo","interfaceObj","handleInterfaceInfoResponse","_parseInterfaceResults","interfaceInfo","hits","row","_source","addresses","j","address","subscribe","unsubscribe","array2param","name","array","joiner","join","getInterfaceDetails","details","addrs","split","k","http","https","create","timeout","httpAgent","Agent","keepAlive","httpsAgent","maxRedirects","maxContentLength","hostInfo","hostLSInfo","tracerouteReqs","tracerouteReqsCompleted","tracerouteInfo","serverURLBase","retrieveTracerouteData","ma_url","baseUrl","src","dst","serverRequest","$","handleTracerouteResponse","_getURL","relative_url","retrieveHostLSInfo","hostUUIDs","handleHostLSInfoResponse","retrieveHostInfo","handleHostInfoResponse","fail","responseText","statusText","errorObj","errorStatus","isFunction","getHostInfoData","getHostLSInfo","push","mergeTracerouteData","getTraceInfo","subscribeTrace","unsubscribeTrace","subscribeLSInfo","unsubscribeLSInfo","subscribeError","unsubscribeError","lsInterfaceResults","lsRequestCount","_init","handleLSCachesRetrieved","hosts","concat","uuid"],"mappings":"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","file":"ps-shared.js","sourcesContent":["import moment from \"moment-timezone\";\n\nimport { TimeSeries, TimeRange, Event } from \"pondjs\";\n\n\nmodule.exports = {\n    getTimezone: function( date ) {\n        let tz;\n        let tzRe = /\\(([^)]+)\\)/;\n        let out;\n        let offset;\n\n        if ( ( typeof date == \"undefined\" ) || date == null ) {\n            return;\n        } else if ( date == \"Invalid Date\" ) {\n            tz = \"\";\n            out = \"\";\n        } else {\n            tz = tzRe.exec( date );\n            if ( typeof tz == \"undefined\" || tz === null ) {\n                // timezone is unknown\n                return \"\";\n            } else {\n                tz = tz[1];\n                let dateObj = new Date( date );\n                let dateMoment = moment( dateObj );\n                offset = dateMoment.utcOffset() / 60;\n                if ( typeof ( offset ) != \"undefined\" && offset >= 0 ) {\n                    offset = \"+\" + offset;\n                }\n            }\n        }\n\n        out = \" (GMT\" + offset + \")\";\n        return out;\n\n    },\n\n    getTimeVars: function (period) {\n        let timeDiff;\n        let summaryWindow;\n        if (period == '4h') {\n            timeDiff = 60*60 * 4;\n            summaryWindow = 0;\n        } else if (period == '12h') {\n            timeDiff = 60*60 * 12;\n            summaryWindow = 0;\n        } else if (period == '1d') {\n            timeDiff = 86400;\n            summaryWindow = 300;\n        } else if (period == '3d') {\n            timeDiff = 86400 * 3;\n            summaryWindow = 300;\n        } else if (period == '1w') {\n            timeDiff = 86400*7;\n            summaryWindow = 3600;\n        } else if (period == '1m') {\n            timeDiff = 86400*31;\n            summaryWindow = 3600;\n        } else if (period == '1y') {\n            timeDiff = 86400*365;\n            summaryWindow = 86400;\n        }\n        let timeRange = {\n            timeDiff: timeDiff,\n            summaryWindow: summaryWindow,\n            timeframe: period\n        };\n        return timeRange;\n\n    },\n\n    // Returns the UNIQUE values of an array\n    unique: function (arr) {\n        var i,\n            len = arr.length,\n            out = [],\n            obj = { };\n\n        for (i = 0; i < len; i++) {\n            obj[arr[i]] = 0;\n        }\n        out = Object.keys( obj );\n        return out;\n    },\n\n    formatBool: function( input, unknownText ) {\n        let out;\n        if ( input === true || input === 1 || input == \"1\" ) {\n            out = \"Yes\";\n        } else if ( input === false || input === 0 || input == \"0\" ) {\n            out = \"No\";\n        }\n        out = this.formatUnknown( out, unknownText );\n        return out;\n\n    },\n\n    formatSItoSI: function( value, Y ) {\n        console.log(\"value\", value);\n        let out = value;\n        let re = /^(\\d+\\.?\\d*)\\s?([KMGT])(\\w*)/;\n        let results = value.match( re );\n        if ( results !== null ) {\n            let values = {};\n            values.K = 1024;\n            values.M = 1024 * 1024;\n            values.G = 1024 * 1024 * 1024;\n            console.log(\"values\", values);\n            console.log(\"value, re, results\", value, re, results);\n\n            out = results[1];\n\n            if ( results[2].toUpperCase() in values ) {\n                let X = results[2]\n                out = out * values[ results[2] ];\n                // convert to Y\n                out = out / values[Y];\n                out = Math.round( out * 10) / 10;\n                out += \" \" + Y + results[3];\n            };\n        }\n        console.log(\"outvalue\", out);\n\n\n        return out;\n\n    },\n\n    formatUnknown: function( str, unknownText ) {\n        if ( typeof unknownText == \"undefined\" || unknownText === null ) {\n            unknownText = \"unknown\";\n        }\n        if ( typeof str == \"undefined\" || str === null || str == \"\" ) {\n            return unknownText;\n        } else {\n            return str;\n\n        }\n\n\n    }\n\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/GraphUtilities.js","import GraphUtilities from \"./GraphUtilities\";\n\nlet EventEmitter = require(\"events\").EventEmitter;\nlet emitter = new EventEmitter();\nlet querystring = require('querystring');\n\nlet axios = require(\"./axios-instance-config.js\");\n\nconst lsCacheHostsURL = \"cgi-bin/graphData.cgi?action=ls_cache_hosts\";\nconst lsQueryURL = \"cgi-bin/graphData.cgi?action=interfaces\";\nconst proxyURL = \"/perfsonar-graphs/cgi-bin/graphData.cgi?action=ls_cache_data&url=\";\n\n/*\n * DESCRIPTION OF CLASS HERE\n*/\n\nmodule.exports = {\n    LSCachesRetrievedTag: \"lsCaches\",\n    useProxy: false,\n    lsCacheURL: null,\n    data: null,\n\n    retrieveLSList: function() {\n        axios.get( lsCacheHostsURL )\n             .then(function(response){\n                let data = response.data;\n                console.log(\"lscachehosts\", data);\n                this.handleLSListResponse( data );\n        }.bind(this));\n    },\n\n    handleLSListResponse: function( data ) {\n        this.lsURLs = data;\n        console.log(\"lsURLs\", data);\n        if ( typeof data == \"undefined\" || ! Array.isArray( data ) ) {\n            console.log(\"LS cache host data is invalid/missingZ\");\n        } else if ( data.length > 0  ) {\n            console.log(\"array of LS cache host data\");\n            this.lsCacheURL = data[0].url;\n            if ( this.lsCacheURL === null ) {\n                console.log(\"no url found!\");\n\n            }\n            console.log(\"selecting cache url: \", this.lsCacheURL);\n            emitter.emit( this.LSCachesRetrievedTag );\n        } else {\n            console.log(\"no LS cache host data available\");\n        } \n        //LSCacheStore.subscribe( \n        //this.retrieveLSHosts();\n\n    },\n\n    subscribeLSCaches: function( callback ) {\n        emitter.on( this.LSCachesRetrievedTag, callback );\n\n    },\n\n    unsubscribeLSCaches: function( callback ) {\n        emitter.removeListener( this.LSCachesRetrievedTag, callback );\n\n    },\n\n    subscribeTag: function( callback, tag ) {\n        emitter.on( tag, callback );\n\n    },\n\n    unsubscribeTag: function( callback, tag ) {\n        emitter.off( tag, callback );\n\n    },\n\n    // TODO: convert this function to a generic one that can take a query as a parameter\n    // and a callback\n    queryLSCache: function( query, message ) {\n        let lsCacheURL = this.lsCacheURL + \"_search\";\n\n        //this.retrieveHostLSData( hosts, lsCacheURL );\n\n        console.log(\"query\", query);\n\n        let preparedQuery = JSON.stringify( query );\n\n        console.log(\"stringified query\", preparedQuery);\n\n        console.log(\"lsCacheURL\", lsCacheURL);\n        console.log(\"message\", message);\n\n        this.message = message;\n\n        let self = this;\n        let successCallback = function( data ) {\n            self.handleLSCacheDataResponse( data, message );\n\n        };\n\n        axios({\n            \"url\": lsCacheURL,\n            \"data\": preparedQuery,\n            \"dataType\": 'json',\n            \"method\": \"POST\"\n        })\n        .then(function( response ) {\n            let data = response.data;\n            console.log(\"data from posted request FIRST DONE SECTION\", data);\n            //this.handleInterfaceInfoResponse( data );\n            //this.handleLSCacheDataResponse( data, message );\n            successCallback( data );\n\n        }.bind(this))\n        .catch(function(error) {\n            console.log(\"error\", error);\n\n            if (error.response) {\n                // The request was made and the server responded with a status code\n                // that falls out of the range of 2xx\n                console.log(\"response error\", error.response.data);\n                console.log(error.response.status);\n                console.log(error.response.headers);\n            } else if (error.request) {\n                // The request was made but no response was received\n                // `error.request` is an instance of XMLHttpRequest in the browser and an instance of\n                // http.ClientRequest in node.js\n                console.log(\"request error\", error.request);\n                    // if we get an error, try the cgi instead\n                    // and set a new flag, useProxy  and make\n                    // all requests through the proxy CGI\n                    let request = error.request;\n                    if ( request.status == 0 ) {\n                        console.log(\"got here!\");\n                        this.useProxy = true;\n                        let url = this.getProxyURL( lsCacheURL );\n                        console.log(\"proxy URL\", url);\n\n                        preparedQuery = JSON.stringify( query );\n\n                        let postData = {\n                            \"query\": preparedQuery,\n                            \"action\": \"ls_cache_data\",\n                            \"dataType\": 'json',\n                            \"url\": lsCacheURL\n\n                        };\n\n                        let preparedData = JSON.stringify( postData );\n\n                        axios({\n                            url: url,\n                            data: querystring.stringify(postData),\n//dataType: 'json',\n                            method: \"POST\"\n                        })\n                        .then(function(response) {\n                                let data = response.data;\n                                console.log(\"query data! SECOND DONE SECTIONz\", data);\n                                //this.handleInterfaceInfoResponse(data);\n                                //this.handleLSCacheDataResponse( data, message );\n                                successCallback( data );\n                            }.bind(this))\n                            .catch (function( data ) {\n                                  //this.handleInterfaceInfoError(data);\n                            }.bind(this));\n            } else {\n                // Something happened in setting up the request that triggered an Error\n                console.log('Error', error.message);\n            }\n            console.log(error.config);\n\n\n\n                        } else {\n                            console.log('fail jqXHR, textStatus, errorThrown', jqXHR, textStatus, errorThrown);\n                            this.handleInterfaceInfoError( data );\n\n                        }\n\n        }.bind(this));\n\n\n\n    },\n    handleLSCacheDataResponse: function( data, message ) {\n        console.log(\"handling LS cache data response (data, message)\", data, message);\n        this.data = data;\n        emitter.emit( this.message );\n    },\n\n    getResponseData: function() {\n        console.log(\"getting response data ...\");\n        return this.data;\n    },\n\n    getProxyURL( url ) {\n\n        let proxy = this.parseUrl( proxyURL );\n\n        if ( this.useProxy ) {\n            url = encodeURIComponent( url );\n            url = proxyURL + url;\n        }\n        let urlObj = this.parseUrl( url );\n        url = urlObj.origin + urlObj.pathname + urlObj.search;\n        return url;\n\n    },\n\n    parseUrl: (function () {\n        return function (url) {\n            var a = document.createElement('a');\n            a.href = url;\n\n            // Work around a couple issues:\n            // - don't show the port if it's 80 or 443 (Chrome didn''t do this, but IE did)\n            // - don't append a port if the port is an empty string \"\"\n            let port = \"\";\n            if ( typeof a.port != \"undefined\" ) {\n                if ( a.port != \"80\" && a.port != \"443\" && a.port != \"\" ) {\n                    port = \":\" + a.port;\n                }\n            }\n\n            let host = a.host;\n            let ret = {\n                host: a.host,\n                hostname: a.hostname,\n                pathname: a.pathname,\n                port: a.port,\n                protocol: a.protocol,\n                search: a.search,\n                hash: a.hash,\n                origin: a.protocol + \"//\" + a.hostname + port\n            };\n            return ret;\n        }\n    })(),\n\n    retrieveInterfaceInfo: function( source_input, dest_input ) {\n\n\n        let sources;\n        let dests;\n        if ( Array.isArray( source_input ) ) {\n            sources = source_input;\n        } else {\n            sources = [ source_input ];\n        }\n        if ( Array.isArray( dest_input ) ) {\n            dests = dest_input\n        } else {\n            dests = [ dest_input ];\n        }\n        this.sources = sources;\n        this.dests = dests;\n\n        //this.retrieveLSList();\n\n    },\n    getInterfaceInfo: function( ) {\n        return this.interfaceObj;\n    },\n    handleInterfaceInfoResponse: function( data ) {\n        console.log(\"data\", data);\n        data = this._parseInterfaceResults( data );\n        console.log(\"processed data\", data);\n        //this.addData( data );\n        this.interfaceInfo = data;\n    },\n\n    _parseInterfaceResults: function( data ) {\n        let out = {};\n        for(let i in data.hits.hits ) {\n            let row = data.hits.hits[i]._source;\n            let addresses = row[\"interface-addresses\"];\n            for(let j in addresses) {\n                let address = addresses[j];\n                if ( !( address in out ) ) {\n                    out[ address ] = row;\n                    console.log(\"client uuid: \", row[\"client-uuid\"] );\n\n                }\n\n            }\n\n\n\n        }\n        console.log(\"keyed on address\", out);\n        return out;\n    },\n\n    subscribe: function( callback ) {\n        emitter.on(\"get\", callback);\n    },\n    unsubscribe: function( callback ) {\n        emitter.off(\"get\", callback);\n    },\n\n    array2param: function( name, array ) {\n        var joiner = \"&\" + name + \"=\";\n        return joiner + array.join(joiner);\n    },\n\n    // Retrieves interface details for a specific ip and returns them\n    // Currently keys on ip; could extend to search all addresses later if needed\n    getInterfaceDetails: function( host ) {\n        let details = this.interfaceObj || {};\n        if ( host in details ) {\n            return details[host];\n        } else {\n            for(let i in details ) {\n                let row = details[i];\n\n                for( let j in row.addresses ) {\n                    let address = row.addresses[j];\n                    if ( address == host ) {\n                        return details[i];\n                    } else {\n                        let addrs = host.split(\",\");\n                        if ( addrs.length > 1 ) {\n                            // handle case where addresses have comma(s)\n                            for(var k in addrs) {\n                                if ( addrs[k] == address ) {\n                                    return details[i];\n                                }\n                            }\n\n\n                        }\n                    }\n\n                }\n\n\n            }\n\n        }\n        // host not found in the cache, return empty object\n        return {};\n    }\n};\n\nmodule.exports.retrieveLSList();\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/LSCacheStore.js","const axios = require('axios');\nconst http = require('http');\nconst https = require('https');\n\nmodule.exports = axios.create({\n  //60 sec timeout\n  timeout: 60000,\n\n  //keepAlive pools and reuses TCP connections, so it's faster\n  httpAgent: new http.Agent({ keepAlive: true }),\n  httpsAgent: new https.Agent({ keepAlive: true }),\n  \n  //follow up to 10 HTTP 3xx redirects\n  maxRedirects: 10,\n  \n  //cap the maximum content length we'll accept to 50MBs, just in case\n  maxContentLength: 50 * 1000 * 1000\n});\n\n//optionally add interceptors here...\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/axios-instance-config.js","var EventEmitter = require('events').EventEmitter;\n\nvar emitter = new EventEmitter();\n\nimport _ from \"underscore\";\n\nimport LSCacheStore from \"./LSCacheStore.js\";\n\nmodule.exports = {\n\n    /* Expects an object of hosts like this (keys must be src, dst (can be multiple -- number of sources and dests must match) ): \n     * {\n     *   src: \"1.2.3.4,\"\n     *   dst: \"2.3.4.5\",\n     * }\n     * returns host info as\n     * { \n     *   src_ip: \"1.2.3.4\", \n     *   src_host: \"hostname.domain\"\n     *   ...\n     *  }\n     */\n    hostInfo: [],\n    hostLSInfo: [],\n    tracerouteReqs: 0,\n    tracerouteReqsCompleted: 0,\n    tracerouteInfo: [],\n    serverURLBase: \"\",\n\n    retrieveTracerouteData: function ( sources, dests, ma_url ) {\n        let baseUrl = \"cgi-bin/graphData.cgi?action=has_traceroute_data\";\n        baseUrl += \"&url=\" + ma_url;\n        if ( !_.isArray( sources ) ) {\n            sources = [ sources ];\n        }\n        if ( !_.isArray( dests ) ) {\n            dests = [ dests ];\n        }\n        for( let i in sources ) {\n            let src = sources[i];\n            let dst = dests[i];\n\n            let url = baseUrl + \"&source=\" + src;\n            url += \"&dest=\" + dst\n\n            this.tracerouteReqs = sources.length;\n\n            this.serverRequest = $.get( url, function(data) {\n                    this.handleTracerouteResponse( data, i );\n                }.bind(this));\n\n        }\n\n\n\n    },\n    _getURL( relative_url ) {\n        return this.serverURLBase + relative_url;\n    },\n    retrieveHostLSInfo: function( hostUUIDs ) {\n        if ( !Array.isArray( hostUUIDs ) ) {\n            hostUUIDs = [ hostUUIDs ];\n        }\n\n\n        let query = {\n              \"query\": {\n                  \"constant_score\": {\n                        \"filter\": {\n                          \"bool\": {\n                            \"must\": [\n                                  {\"match\": { \"type\": \"host\" } },\n                                  {\"terms\": { \"client-uuid\": hostUUIDs } }\n\n                            ]\n                        }\n                        }\n                  }\n              }\n              ,\n              \"sort\": [\n                  { \"expires\": { \"order\": \"desc\" } }\n\n              ]\n\n        };\n        console.log(\"hostinfo query\", query);\n\n        let message = \"hostInfoLS\";\n        LSCacheStore.subscribeTag( this.handleHostLSInfoResponse.bind(this) , message );\n        LSCacheStore.queryLSCache( query, message );\n\n\n\n    },\n    retrieveHostInfo: function( source_input, dest_input, callback ) {\n        let url = this._getURL(\"cgi-bin/graphData.cgi?action=hosts\");\n\n        let sources;\n        let dests;\n        if ( Array.isArray( source_input ) ) {\n            sources = source_input;\n        } else {\n            sources = [ source_input ];\n        }\n        if ( Array.isArray( dest_input ) ) {\n            dests = dest_input\n        } else {\n            dests = [ dest_input ];\n        }\n        for (let i=0; i<sources.length; i++ ) {\n            url += \"&src=\" + sources[i];\n            url += \"&dest=\" + dests[i];\n\n        }\n        this.serverRequest = $.get( \n                url,\n                function(data) {\n                    console.log(\"hostInfo data\", data);\n                    this.handleHostInfoResponse( data );\n                }.bind(this));\n\n        if ( typeof this.serverRequest != \"undefined \"  ) {\n\n                this.serverRequest.fail(function( jqXHR ) {\n                    var responseText = jqXHR.responseText;\n                    var statusText = jqXHR.statusText;\n                    var errorThrown = jqXHR.status;\n\n                    var errorObj = {\n                        errorStatus: \"error\",\n                        responseText: responseText,\n                        statusText: statusText,\n                        errorThrown: errorThrown\n                    };\n\n                    if ( _.isFunction( callback ) ) {\n                        callback( errorObj );\n                    }\n\n                    emitter.emit(\"error\");\n\n                }.bind(this) );\n        }\n            //console.log( this.serverRequest.error() );\n\n    },\n    getHostInfoData: function( ) {\n        return this.hostInfo;\n    },\n    getHostLSInfo: function( ) {\n        return this.hostLSInfo;\n    },\n    handleHostInfoResponse: function( data ) {\n        this.hostInfo = data;\n        emitter.emit(\"get\");\n    },\n    handleHostLSInfoResponse: function( ) {\n        let data = LSCacheStore.getResponseData();\n        let message = \"hostInfoLS\";\n        console.log(\"message, host ls info response\", message, data);\n        this.hostLSInfo = data;\n        emitter.emit( message );\n    },\n    handleTracerouteResponse: function( data, i ) {\n        this.tracerouteReqsCompleted++;\n        this.tracerouteInfo.push( data );\n        if ( this.tracerouteReqsCompleted == this.tracerouteReqs ) {\n            this.mergeTracerouteData();\n\n        }\n    },\n    mergeTracerouteData: function() {\n        emitter.emit(\"getTrace\");\n    },\n    getTraceInfo: function() {\n        return this.tracerouteInfo;\n    },\n    subscribeTrace: function( callback ) {\n        emitter.on(\"getTrace\", callback);\n    },\n    unsubscribeTrace: function( callback ) {\n        emitter.off(\"getTrace\", callback);\n    },\n    subscribe: function( callback ) {\n        emitter.on(\"get\", callback);\n    },\n    subscribeLSInfo: function( callback ) {\n        emitter.on(\"hostInfoLS\", callback);\n    },\n    unsubscribeLSInfo: function( callback ) {\n        emitter.off(\"hostInfoLS\", callback);\n    },\n    unsubscribe: function( callback ) {\n        emitter.removeListener(\"get\", callback);\n    },\n    subscribeError: function( callback ) {\n        emitter.on(\"error\", callback);\n    },\n    unsubscribeError: function( callback ) {\n        emitter.removeListener(\"error\", callback);\n    },\n\n};\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/HostInfoStore.js","import LSCacheStore from \"./LSCacheStore.js\";\nimport HostInfoStore from \"./HostInfoStore\";\nimport GraphUtilities from \"./GraphUtilities\";\n\nlet EventEmitter = require('events').EventEmitter;\nlet emitter = new EventEmitter();\n\nmodule.exports = {\n\n    /* Expects an object of hosts like this (keys must be src, dst (can be multiple -- number of sources and dests must match) ): \n     * {\n     *   src: \"1.2.3.4,\"\n     *   dst: \"2.3.4.5\",\n     * }\n     * Createes a cache keyed on ip addressas\n     * { \n     *   {\"ip\"}: { addresses, mtu, capacity}\n     *   ...\n     *  }\n     */\n    interfaceInfo: [],\n    interfaceObj: {},\n    lsInterfaceResults: [],\n    sources: [],\n    dests: [],\n    lsRequestCount: 0,\n\n    _init: function() {\n        //LSCacheStore.subscribe( LSCacheStore.LSCachesRetrievedTag, this.handleLSCachesRetrieved );\n\n    },\n\n    handleLSCachesRetrieved: function() {\n\n\n    },\n\n    handleInterfaceInfoError: function( data ) {\n\n    },\n\n    // This function actually queries the LS cache (using LSCacheStore)\n    retrieveInterfaceInfo: function( sources, dests ) {\n\n        if ( typeof sources == \"undefined\" || typeof dests == \"undefined\" ) {\n            console.log(\"sources and/or dests undefined; aborting\");\n                    return;\n\n        }\n        if ( !Array.isArray( sources ) ) {\n            sources = [ sources ];\n        }\n        if ( !Array.isArray( dests ) ) {\n            dests = [ dests ];\n        }\n        this.sources = sources;\n        this.dests = dests;\n\n        console.log(\"retrieveInterfaceInfo sources\", sources);\n        console.log(\"dests\", dests);\n\n        let hosts = sources.concat( dests );\n        hosts = GraphUtilities.unique( hosts );\n\n        let query = {\n              \"query\": {\n                      \"bool\": {\n                        \"must\": [\n                              {\"match\": { \"type\": \"interface\" } },\n                              {\"terms\": { \"interface-addresses\": hosts } }\n\n                        ]\n                    }\n              }\n              ,\n              \"sort\": [\n                  { \"expires\": { \"order\": \"desc\" } }\n\n              ]\n\n        };\n        let tag = \"interfaceInfo\";\n        LSCacheStore.queryLSCache( query, tag );\n        LSCacheStore.subscribeTag( this.handleInterfaceInfoResponse.bind(this), tag );\n\n    },\n\n    getInterfaceInfo: function( ) {\n        return this.interfaceObj;\n    },\n\n    handleInterfaceInfoResponse: function( ) {\n        let data = LSCacheStore.getResponseData();\n        console.log(\"data\", data);\n        data = this._parseInterfaceResults( data );\n        console.log(\"processed data\", data);\n\n        let interfaceObj =  this.interfaceObj\n        console.log(\"combined data\", interfaceObj);\n\n        this.interfaceInfo = interfaceObj;\n\n        emitter.emit(\"get\");\n    },\n\n    _parseInterfaceResults: function( data ) {\n        let out = [];\n        let obj = {};\n        for(let i in data.hits.hits ) {\n            let row = data.hits.hits[i]._source;\n            let addresses = row[\"interface-addresses\"];\n            let uuid = row[\"client-uuid\"];\n            for(let j in addresses) {\n                let address = addresses[j];\n                if ( !( address in obj ) ) {\n                    out.push( row );\n                    this.lsInterfaceResults.push( row );\n                    obj[ address ] = row;\n                    continue;\n                }\n\n            }\n\n        }\n        this.interfaceObj = obj;\n        console.log(\"keyed on address\", out);\n        return out;\n    },\n\n    subscribe: function( callback ) {\n        emitter.on(\"get\", callback);\n    },\n    unsubscribe: function( callback ) {\n        emitter.off(\"get\", callback);\n    },\n\n    array2param: function( name, array ) {\n        var joiner = \"&\" + name + \"=\";\n        return joiner + array.join(joiner);\n    },\n\n    // Retrieves interface details for a specific ip and returns them\n    // Currently keys on ip; could extend to search all addresses later if needed\n    getInterfaceDetails: function( host ) {\n        let details = this.interfaceObj || {};\n        console.log(\"getInterfaceDetails details\", details);\n        if ( host in details ) {\n            console.log(\"found details for \", host, details[host]);\n            return details[host];\n        } else {\n            console.log(\"host details not found; searching\");\n            for(let i in details ) {\n                let row = details[i];\n\n                for( let j in row.addresses ) {\n                    let address = row.addresses[j];\n                    if ( address == host ) {\n                        return details[i];\n                    } else {\n                        let addrs = host.split(\",\");\n                        if ( addrs.length > 1 ) {\n                            // handle case where addresses have comma(s)\n                            for(var k in addrs) {\n                                if ( addrs[k] == address ) {\n                                    return details[i];\n                                }\n                            }\n\n\n                        }\n                    }\n\n                }\n\n\n            }\n\n        }\n        // host not found in the cache, return empty object\n        return {};\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/InterfaceInfoStore.js"],"sourceRoot":""}